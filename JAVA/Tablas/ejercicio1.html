<!DOCTYPE html>
<html>
<head>
<title>INTERSECTION LIST</title>
</head>
<body>
PRIMERA LISTA:
<ul id="lista1">
<li>manzana</li>
<li>pera</li>
<ul>
<li>conferencia</li>
<ul>
<li>conferenciaverde</li>
<li>conferenciaamarilla</li>
<li>conferenciaroja</li>
</ul>
<li>peradeagua</li>
<li>peritadulce</li>
<ul>
<li>Dimas</li>
<li>Gestas</li>
<li>Malakatos</li>
<li>Jose</li>
</ul>
</ul>
<li>limon</li>
<li>limon</li>
<li>LIMON</li>
</ul>
Segunda lista:
<ul id="lista2">
<li>manzana</li>
<li>manzana</li>
<li>manzana</li>
<li>manzana</li>
<li>pera</li>
<li>limon</li>
</ul>


<script>

//Declarar las listas
var lista1=[];
var lista2=[];
var newlista=[];

function inserta(desde,hasta){
if(desde.nodeName == "LI"){
  hasta.push(desde.innerHTML.toUpperCase())
}else{
  for (let i = 0; i < desde.children.length; i++) {
    inserta(desde.children[i],hasta)
    
    }
  }
}


// Insertar las dos listas del DOM en 2 arrays diferentes
inserta(document.getElementById("lista1"),lista1);
inserta(document.getElementById("lista2"),lista2);

//Ordenar las dos listas y eliminar duplicados. Si ordeno las listas puedo quitar los duplicados de forma f치cil porque estar치n juntos.
lista1.sort();
lista1=lista1.filter((f,i,arr)=>i==0 || arr[i]!=arr[i-1]);

lista2.sort();
lista2=lista2.filter((f,i,arr)=>i==0 || arr[i]!=arr[i-1]);

console.log(lista1);
console.log(lista2);

//Crear una nueva lista concatenando el resultado de las dos anteriores.
newlista=lista1.concat(lista2);

//Ordenar la nueva lista
newlista.sort();

//Los duplicados en esa nueva lista ser치n la intersecci칩n que voy buscando.
newlista= newlista.filter((f,i,arr)=>i>0 && arr[i]==arr[i-1]);

//mostrar el resultado
console.log(newlista);


</script>

</body>
</html>